<?xml version="1.0" encoding="utf-8"?>
<Patch>
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Medieval Prosthetics</li> <!-- Medieval Prosthetics NunahurAlShamikh.MedP -->
		</mods>
		<match Class="PatchOperationSequence">
			<success>Normal</success>
			<operations>
				
<!-- add tech levels, satisfy transhumanist -->				
               			<li Class="PatchOperationAdd"> <!-- this changes all Things with <ThingDef Name=""> ie. the parent Defs-->
                    			<xpath>Defs/ThingDef[@Name="Basic" or @Name="ArtificialMed"]</xpath>
                    				<value>
                        				<techLevel>Neolithic</techLevel>
							<techHediffsTags>
								<li>Simple</li>
							</techHediffsTags>
                    				</value>
                		</li>
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[@Name="MechanicalMed" or @Name="AmbroisenMed"]</xpath>
                    				<value>
                       					<techLevel>Medieval</techLevel>
							<techHediffsTags>
								<li>Simple</li>
							</techHediffsTags>
                    				</value>
                		</li>

<!-- change parent Def work time for use as default value -->
                		<li Class="PatchOperationReplace">
                    			<xpath>Defs/ThingDef[@Name="Basic"]/statBases/WorkToMake</xpath>
                    				<value>
                        				<WorkToMake>4000</WorkToMake>
                   				</value>
                		</li>
                		<li Class="PatchOperationReplace">
                    			<xpath>Defs/ThingDef[@Name="ArtificialMed"]/statBases/WorkToMake</xpath>
                    				<value>
                        				<WorkToMake>8000</WorkToMake>
                    				</value>
                		</li>
                		<li Class="PatchOperationReplace">
                    			<xpath>Defs/ThingDef[@Name="MechanicalMed"]/statBases/WorkToMake</xpath>
                    				<value>
                        				<WorkToMake>12000</WorkToMake>
                    				</value>
               			</li>
                		<li Class="PatchOperationReplace">
                    			<xpath>Defs/ThingDef[@Name="AmbroisenMed"]/statBases/WorkToMake</xpath>
                    				<value>
                       					<WorkToMake>16000</WorkToMake>
                    				</value>
                		</li>
				
<!-- create individual work time for specific parts -->
				
<!-- basic parts -->
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[
                            		defName="ProstheticHook" or 
                            		defName="WoodenFoot" or 
                            		defName="WoodenNose"
                            		]/statBases
                    			</xpath>
                    				<value>
                        				<WorkToMake>3000</WorkToMake>
                    				</value>
                		</li>
                		<li Class="PatchOperationAdd">
                    			<xpath>
                        		Defs/ThingDef[
                        		defName="WoodenToe" or 
                        		defName="WoodenFinger" or 
                        		defName="EyePatch" or 
                        		defName="EarPatch"
                        		]/statBases
                    			</xpath>
                    				<value>
                        				<WorkToMake>2000</WorkToMake>
                    				</value>
               			</li>
				
<!-- artificial parts -->
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[
                            		defName="ArtificialMedHand" or 
                            		defName="ArtificialMedFoot" or 
                            		defName="ArtificialMedNose" or 
                            		defName="ArtificialMedEye" or 
                            		defName="ArtificialMedEar"
                            		]/statBases
                    			</xpath>
                    				<value>
                        				<WorkToMake>7000</WorkToMake>
                    				</value>
                		</li>
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="ArtificialMedToe" or defName="ArtificialMedFinger"]/statBases</xpath>
                    				<value>
                        				<WorkToMake>4000</WorkToMake>
                    				</value>
                		</li>
				
<!-- mechanical parts -->
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[
                            		defName="MechanicalMedHand" or 
                            		defName="MechanicalMedFoot" or 
                            		defName="MechanicalMedNose" or 
                            		defName="MechanicalMedEye" or 
                            		defName="MechanicalMedEar"
                            		]/statBases
                    			</xpath>
                    				<value>
                        				<WorkToMake>11000</WorkToMake>
                    				</value>
                		</li>
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="MechanicalMedToe" or defName="MechanicalMedFinger"]/statBases</xpath>
                    				<value>
                        				<WorkToMake>6000</WorkToMake>
                    				</value>
                		</li>
				
<!-- ambroisen parts -->
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[
                            		defName="AmbroisenMedHand" or 
                            		defName="AmbroisenMedFoot" or 
                            		defName="AmbroisenMedNose" or 
                            		defName="AmbroisenMedEye" or 
                            		defName="AmbroisenMedEar"
                            		]/statBases
                    			</xpath>
                    				<value>
                        				<WorkToMake>14000</WorkToMake>
                    				</value>
                		</li>
                		<li Class="PatchOperationAdd">
                   			<xpath>Defs/ThingDef[defName="AmbroisenMedToe" or defName="AmbroisenMedFinger"]/statBases</xpath>
                    				<value>
                        				<WorkToMake>7000</WorkToMake>
                    				</value>
                		</li>            


<!-- make all prosthetics craftable at MO Workbench and Crafting Spot -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[@Name="Basic" or @Name="ArtificialMed"]/recipeMaker/recipeUsers</xpath>
                    				<value>
                        				<li>DankPyon_Workbench</li>							
                    				</value>				
				</li>
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[@Name="MechanicalMed" or @Name="AmbroisenMed"]/recipeMaker/recipeUsers</xpath>
                    				<value>
                        				<li>DankPyon_Workbench</li>	
							<li>CraftingSpot</li>
                    				</value>				
				</li>
				
<!-- replace steel to iron for neolithic -->
				<li Class="PatchOperationSetName">
					<xpath>Defs/ThingDef[@ParentName="Basic" or @ParentName="ArtificialMed"]/costList/Steel</xpath>
						<name>DankPyon_IronIngot</name>
				</li>
			
<!-- Change recipes for Ambroisen Prosthetics to include Emerald-->
										
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="AmbroisenMedHand" or defName="AmbroisenMedFoot" or defName="AmbroisenMedEye"]/costList</xpath>
                    				<value>
                        				<DankPyon_Emerald>5</DankPyon_Emerald>
                    				</value>
               			</li>
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="AmbroisenMedLeg" or defName="AmbroisenMedArm"]/costList</xpath>
                    				<value>
                        				<DankPyon_Emerald>15</DankPyon_Emerald>
                    				</value>
               			</li>
        			<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="AmbroisenMedFinger" or defName="AmbroisenMedToe"]/costList</xpath>
                    				<value>
                        				<DankPyon_Emerald>2</DankPyon_Emerald>
                    				</value>
               			</li>
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="AmbroisenMedEar" or defName="AmbroisenMedNose"]/costList</xpath>
                    				<value>
                        				<DankPyon_Emerald>1</DankPyon_Emerald>
                    				</value>
               			</li>
				
<!-- increase efficiency of sensory ambroisen prosthetics (they are magical) -->
				<li Class="PatchOperationReplace">
                    			<xpath>Defs/HediffDef[defName="AmbroisenMedEar" or defName="AmbroisenMedNose" or defName="AmbroisenMedEye"]/addedPartProps</xpath>
                    				<value>
                       					<partEfficiency>0.70</partEfficiency>                  				</value>
				</li>
					
<!-- adjust efficiency of Basic Parts -->
				<li Class="PatchOperationReplace">
                    			<xpath>Defs/HediffDef[defName="IronArm" or defName="ProstheticHook" or defName="WoodenFoot" or defName="WoodenToe" or defName="WoodenFinger" or defName="WoodenNose" or defName="EyePatch" or defName="EarPatch"]/addedPartProps</xpath>
                    				<value>
                       					<partEfficiency>0.50</partEfficiency>
                   				</value>
				</li>
		
<!-- adjust efficiency of Artifical Parts -->
				<li Class="PatchOperationReplace">
                    			<xpath>Defs/HediffDef[defName="ArtificialMedHand" or defName="ArtificialMedArm" or defName="ArtificialMedLeg" or defName="ArtificialMedFoot" or defName="ArtificialMedToe" or defName="ArtificialMedFinger" or defName="ArtificialMedNose" or defName="ArtificialMedEye" or defName="ArtificialMedEar"]/addedPartProps</xpath>
                    				<value>
                       					<partEfficiency>0.65</partEfficiency>
                   				</value>
				</li>
		
<!-- adjust efficiency of Mechanical Parts -->
				<li Class="PatchOperationReplace">
                    			<xpath>Defs/HediffDef[defName="MechanicalMedHand" or defName="MechanicalMedArm" or defName="MechanicalMedLeg" or defName="MechanicalMedFoot" or defName="MechanicalMedToe" or defName="MechanicalMedFinger" or defName="MechanicalMedNose" or defName="MechanicalMedEye" or defName="MechanicalMedEar"]/addedPartProps</xpath>
                    				<value>
                       					<partEfficiency>0.80</partEfficiency>
                   				</value>
				</li>
		
<!-- Make prosthetics satisfy transhumanist trait -->

				<li Class="PatchOperationAdd">
                    			<xpath>Defs/HediffDef[@Name="addedPartMedAmbroisen" or @Name="addedPartMedArtificial" or @Name="addedPartBasic"or @Name="addedPartMedArtificial"]</xpath>
                    				<value>
                       					<isTechHediff>true</isTechHediff>
							<tradeTags>
								<li>TechHediff</li>
   							 </tradeTags>
                   				</value>
				</li>	
			</operations>				
		</match>
	</Operation>		
</Patch>
