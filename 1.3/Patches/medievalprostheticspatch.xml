<?xml version="1.0" encoding="utf-8"?>
<Patch>
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Medieval Prosthetics</li> <!-- Medieval Prosthetics NunahurAlShamikh.MedP -->
		</mods>
		<match Class="PatchOperationSequence">
			<success>Normal</success>
			<operations>
				
<!-- add tech levels, satisfy transhumanist -->				
               			<li Class="PatchOperationAdd"> <!-- this changes all Things with <ThingDef Name=""> ie. the parent Defs-->
                    			<xpath>Defs/ThingDef[@Name="Basic" or @Name="ArtificialMed"]</xpath>
                    				<value>
                        				<techLevel>Neolithic</techLevel>
							<techHediffsTags>
								<li>Simple</li>
							</techHediffsTags>
                    				</value>
                		</li>
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[@Name="MechanicalMed" or @Name="AmbroisenMed"]</xpath>
                    				<value>
                       					<techLevel>Medieval</techLevel>
							<techHediffsTags>
								<li>Simple</li>
							</techHediffsTags>
                    				</value>
                		</li>

<!-- change parent Def work time for use as default value -->
                		<li Class="PatchOperationReplace">
                    			<xpath>Defs/ThingDef[@Name="Basic"]/statBases/WorkToMake</xpath>
                    				<value>
                        				<WorkToMake>4000</WorkToMake>
                   				</value>
                		</li>
                		<li Class="PatchOperationReplace">
                    			<xpath>Defs/ThingDef[@Name="ArtificialMed"]/statBases/WorkToMake</xpath>
                    				<value>
                        				<WorkToMake>8000</WorkToMake>
                    				</value>
                		</li>
                		<li Class="PatchOperationReplace">
                    			<xpath>Defs/ThingDef[@Name="MechanicalMed"]/statBases/WorkToMake</xpath>
                    				<value>
                        				<WorkToMake>12000</WorkToMake>
                    				</value>
               			</li>
                		<li Class="PatchOperationReplace">
                    			<xpath>Defs/ThingDef[@Name="AmbroisenMed"]/statBases/WorkToMake</xpath>
                    				<value>
                       					<WorkToMake>16000</WorkToMake>
                    				</value>
                		</li>
				
<!-- create individual work time for specific parts -->
				
<!-- basic parts -->
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[
                            		defName="ProstheticHook" or 
                            		defName="WoodenFoot" or 
                            		defName="WoodenNose"
                            		]/statBases
                    			</xpath>
                    				<value>
                        				<WorkToMake>3000</WorkToMake>
                    				</value>
                		</li>
                		<li Class="PatchOperationAdd">
                    			<xpath>
                        		Defs/ThingDef[
                        		defName="WoodenToe" or 
                        		defName="WoodenFinger" or 
                        		defName="EyePatch" or 
                        		defName="EarPatch"
                        		]/statBases
                    			</xpath>
                    				<value>
                        				<WorkToMake>2000</WorkToMake>
                    				</value>
               			</li>
				
<!-- artificial parts -->
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[
                            		defName="ArtificialMedHand" or 
                            		defName="ArtificialMedFoot" or 
                            		defName="ArtificialMedNose" or 
                            		defName="ArtificialMedEye" or 
                            		defName="ArtificialMedEar"
                            		]/statBases
                    			</xpath>
                    				<value>
                        				<WorkToMake>7000</WorkToMake>
                    				</value>
                		</li>
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="ArtificialMedToe" or defName="ArtificialMedFinger"]/statBases</xpath>
                    				<value>
                        				<WorkToMake>4000</WorkToMake>
                    				</value>
                		</li>
				
<!-- mechanical parts -->
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[
                            		defName="MechanicalMedHand" or 
                            		defName="MechanicalMedFoot" or 
                            		defName="MechanicalMedNose" or 
                            		defName="MechanicalMedEye" or 
                            		defName="MechanicalMedEar"
                            		]/statBases
                    			</xpath>
                    				<value>
                        				<WorkToMake>11000</WorkToMake>
                    				</value>
                		</li>
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="MechanicalMedToe" or defName="MechanicalMedFinger"]/statBases</xpath>
                    				<value>
                        				<WorkToMake>6000</WorkToMake>
                    				</value>
                		</li>
				
<!-- ambroisen parts -->
                		<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[
                            		defName="AmbroisenMedHand" or 
                            		defName="AmbroisenMedFoot" or 
                            		defName="AmbroisenMedNose" or 
                            		defName="AmbroisenMedEye" or 
                            		defName="AmbroisenMedEar"
                            		]/statBases
                    			</xpath>
                    				<value>
                        				<WorkToMake>14000</WorkToMake>
                    				</value>
                		</li>
                		<li Class="PatchOperationAdd">
                   			<xpath>Defs/ThingDef[defName="AmbroisenMedToe" or defName="AmbroisenMedFinger"]/statBases</xpath>
                    				<value>
                        				<WorkToMake>7000</WorkToMake>
                    				</value>
                		</li>            


<!-- make all prosthetics craftable at MO Workbench and Crafting Spot -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="Basic" or defName="ArtificialMed"]/recipeUsers</xpath>
                    				<value>
                        				<li>DankPyon_Workbench</li>							
                    				</value>				
				</li>
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName=""MechanicalMed"" or defName="AmbroisenMed"]/recipeUsers</xpath>
                    				<value>
                        				<li>DankPyon_Workbench</li>	
							<li>CraftingSpot</li>
                    				</value>				
				</li>	
				
<!--change wood and metal ingredients to use stuffed ingredients where possible + add emerald to ambroisen parts (magical)-->
<!-- Basic -->
				
<!-- IronArm -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="IronArm"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>50</costStuffCount>
                    				</value>				
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="IronArm"]/costlist</xpath>
        			</li>
				
<!--ProstheticHook -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="ProstheticHook"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>25</costStuffCount>
                    				</value>				
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="ProstheticHook"]/costlist</xpath>
        			</li>
				
<!-- WoodenFoot -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="WoodenFoot"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Woody</li>
							</stuffCategories>
							<costStuffCount>25</costStuffCount>
                    				</value>				
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="WoodenFoot"]/costlist</xpath>
        			</li>
				
<!-- WoodenToe WoodenFinger WoodenNose -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="WoodenToe" or defName="WoodenFinger" or defName="WoodenNose"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Woody</li>
							</stuffCategories>
							<costStuffCount>5</costStuffCount>
                    				</value>				
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="WoodenToe" or defName="WoodenFinger" or defName="WoodenNose"]/costlist</xpath>
        			</li>
			
<!-- EyePatch EarPatch -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="EyePatch" or defName="EarPatch"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Fabric</li>
							</stuffCategories>
							<costStuffCount>15</costStuffCount>
                    				</value>				
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="EyePatch" or defName="EarPatch"]/costlist</xpath>
        			</li>
				
<!-- Artificial -->
				
<!-- ArtificialMedHand ArtificialMedFoot -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="ArtificialMedHand" or defName="ArtificialMedFoot"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>55</costStuffCount>
                    				</value>				
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="ArtificialMedHand"]/costlist</xpath>
					<value>
						<Steel>55</Steel>
					</value>
        			</li>
				
<!-- ArtificialMedArm ArtificialMedLeg -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="ArtificialMedArm"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>100</costStuffCount>
                    				</value>				
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="ArtificialMedHand" or defName="ArtificialMedLeg"]/costlist</xpath>
					<value>
						<Steel>100</Steel>
					</value>
        			</li>
				
<!--ArtificialMedToe ArtificialMedFinger -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="ArtificialMedToe" or defName="ArtificialMedFinger"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>15</costStuffCount>
                    				</value>				
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="ArtificialMedToe" or defName="ArtificialMedFinger"]/costlist</xpath>
					<value>
						<Steel>15</Steel>
					</value>
        			</li>
				
<!-- ArtificialMedNose ArtificialMedEye ArtificialMedEar -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="ArtificialMedNose" or defName="ArtificialMedFinger or defName="ArtificialMedEar"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Woody</li>
							</stuffCategories>
							<costStuffCount>15</costStuffCount>
                    				</value>				
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="ArtificialMedToe" or defName="ArtificialMedFinger"]/costlist</xpath>					
        			</li>
				
<!-- Mechanical -->
				
<!-- MechanicalMedHand MechanicalMedFoot -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="MechanicalMedHand" or defName="MechanicalMedFoot"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>70</costStuffCount>
                    				</value>
				</li>
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="MechanicalMedHand" or defName="MechanicalMedFoot"]/costlist</xpath>
                    				<value>
							<DankPyon_ComponentBasic>3</DankPyon_ComponentBasic>	
                    				</value>
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="MechanicalMedHand" or defName="MechanicalMedFoot"]/costlist</xpath>
					<value>
						<Steel>70</Steel>
						<ComponentIndustrial>3</ComponentIndustrial>
					</value>
        			</li>
				
<!-- MechanicalMedArm MechanicalMedLeg -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="MechanicalMedArm" or defName="MechanicalMedLeg"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>115</costStuffCount>
                    				</value>
				</li>
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="MechanicalMedArm" or defName="MechanicalMedLeg"]/costlist</xpath>
                    				<value>
							<DankPyon_ComponentBasic>6</DankPyon_ComponentBasic>	
                    				</value>
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="MechanicalMedArm" or defName="MechanicalMedLeg"]/costlist</xpath>
					<value>
						<Steel>115</Steel>
						<ComponentIndustrial>6</ComponentIndustrial>
					</value>
        			</li>
				
<!-- MechanicalMedToe MechanicalMedFinger -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="MechanicalMedToe" or defName="MechanicalMedFinger"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>25</costStuffCount>
                    				</value>
				</li>
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="MechanicalMedToe" or defName="MechanicalMedFinger"]/costlist</xpath>
                    				<value>
							<DankPyon_ComponentBasic>1</DankPyon_ComponentBasic>	
                    				</value>
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="MechanicalMedToe" or defName="MechanicalMedFinger"]/costlist</xpath>
					<value>
						<Steel>25</Steel>
						<ComponentIndustrial>1</ComponentIndustrial>
					</value>
        			</li>
				
<!-- MechanicalMedNose MechanicalMedEye MechanicalMedEar -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="MechanicalMedNose" or defName="MechanicalMedEye" or defName="MechanicalMedEar"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>10</costStuffCount>
                    				</value>
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="MechanicalMedNose" or defName="MechanicalMedEye" or defName="MechanicalMedEar"]/costlist</xpath>
					<value>
						<Steel>10</Steel>						
					</value>
        			</li>
				
<!-- Ambroisen -->
				
<!-- AmbroisenMedHand AmbroisenMedFoot -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="AmbroisenMedHand" or defName="AmbroisenMedFoot"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>70</costStuffCount>
                    				</value>
				</li>
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="AmbroisenMedHand" or defName="AmbroisenMedFoot"]/costlist</xpath>
                    				<value>
							<DankPyon_ComponentBasic>10</DankPyon_ComponentBasic>	
							<DankPyon_Emerald>5</DankPyon_Emerald>
                    				</value>
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="AmbroisenMedHand" or defName="AmbroisenMedFoot"]/costlist</xpath>
					<value>
						<Steel>70</Steel>
						<ComponentIndustrial>10</ComponentIndustrial>
					</value>
        			</li>
				
<!-- AmbroisenMedArm AmbroisenMedLeg -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="AmbroisenMedArm" or defName="AmbroisenMedLeg"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>115</costStuffCount>
                    				</value>
				</li>
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="AmbroisenMedArm" or defName="AmbroisenMedLeg"]/costlist</xpath>
                    				<value>
							<DankPyon_ComponentBasic>15</DankPyon_ComponentBasic>
							<DankPyon_Emerald>15</DankPyon_Emerald>
                    				</value>
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="AmbroisenMedArm" or defName="AmbroisenMedLeg"]/costlist</xpath>
					<value>
						<Steel>115</Steel>
						<ComponentIndustrial>15</ComponentIndustrial>
					</value>
        			</li>
				
<!-- AmbroisenMedToe AmbroisenMedFinger -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="AmbroisenMedToe" or defName="AmbroisenMedFinger"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>25</costStuffCount>
                    				</value>
				</li>
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="AmbroisenMedToe" or defName="AmbroisenMedFinger"]/costlist</xpath>
                    				<value>
							<DankPyon_ComponentBasic>5</DankPyon_ComponentBasic>
							<DankPyon_Emerald>2</DankPyon_Emerald>
                    				</value>
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="AmbroisenMedToe" or defName="AmbroisenMedFinger"]/costlist</xpath>
					<value>
						<Steel>25</Steel>
						<ComponentIndustrial>5</ComponentIndustrial>
					</value>
        			</li>
			
<!-- AmbroisenMedNose AmbroisenMedEye AmbroisenMedEar -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="AmbroisenMedNose" or defName="AmbroisenMedEye" or defName="AmbroisenMedEar"]</xpath>
                    				<value>
                        				<stuffCategories>
								<li>Metallic</li>
							</stuffCategories>
							<costStuffCount>20</costStuffCount>
                    				</value>
				</li>
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/ThingDef[defName="AmbroisenMedNose" or defName="AmbroisenMedEye" or defName="AmbroisenMedEar"]/costlist</xpath>
                    				<value>
							<DankPyon_ComponentBasic>5</DankPyon_ComponentBasic>
							<DankPyon_Emerald>2</DankPyon_Emerald>
                    				</value>
				</li>
				<li Class="PatchOperationRemove">
          				<xpath>Defs/ThingDef[defName="AmbroisenMedNose" or defName="AmbroisenMedEye" or defName="AmbroisenMedEar"]/costlist</xpath>
					<value>
						<Steel>20</Steel>
					</value>
        			</li>						
				
<!-- increase efficiency of sensory ambroisen prosthetics (they are magical) -->
				<li Class="PatchOperationReplace">
                    			<xpath>Defs/HediffDef[defName="AmbroisenMedEar" or defName="AmbroisenMedNose" or defName="AmbroisenMedEye"]/addedPartProps</xpath>
                    				<value>
                       					<partEfficiency>0.70</partEfficiency>
                   				</value>
				</li>
					
<!-- adjust efficiency of Basic Parts -->
				<li Class="PatchOperationReplace">
                    			<xpath>Defs/HediffDef[defname="addedPartBasic"]/addedPartProps</xpath>
                    				<value>
                       					<partEfficiency>0.50</partEfficiency>
                   				</value>
				</li>
		
<!-- adjust efficiency of Artifical Parts -->
				<li Class="PatchOperationReplace">
                    			<xpath>Defs/HediffDef[defname="addedPartMedArtificial"]/addedPartProps</xpath>
                    				<value>
                       					<partEfficiency>0.65</partEfficiency>
                   				</value>
				</li>
		
<!-- adjust efficiency of Mechanical Parts -->
				<li Class="PatchOperationReplace">
                    			<xpath>Defs/HediffDef[defname="addedPartMedArtificial"]/addedPartProps</xpath>
                    				<value>
                       					<partEfficiency>0.80</partEfficiency>
                   				</value>
				</li>
		
<!-- Make prosthetics satisfy transhumanist trait -->
		
<!-- ambroisen parts -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/HediffDef[defName="addedPartMedAmbroisen"]</xpath>
                    				<value>
                       					<isTechHediff>true</isTechHediff>
							<tradeTags>
								<li>TechHediff</li>
   							 </tradeTags>
                   				</value>
				</li>
					
<!-- Basic Parts -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/HediffDef[defname="addedPartBasic"]</xpath>
                    				<value>
                       					<isTechHediff>true</isTechHediff>
							<tradeTags>
								<li>TechHediff</li>
   							 </tradeTags>
                   				</value>
				</li>
		
<!-- Artifical Parts -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/HediffDef[defname="addedPartMedArtificial"]</xpath>
                    				<value>
							<isTechHediff>true</isTechHediff>
							<tradeTags>
								<li>TechHediff</li>
   							 </tradeTags>
                   				</value>
				</li>
		
<!-- Mechanical Parts -->
				<li Class="PatchOperationAdd">
                    			<xpath>Defs/HediffDef[defname="addedPartMedArtificial"]</xpath>
                    				<value>
                       					<isTechHediff>true</isTechHediff>
							<tradeTags>
								<li>TechHediff</li>
   							 </tradeTags>
                   				</value>
				</li>
				
			</operations>				
		</match>
	</Operation>		
</Patch>
